pool:

  name: Azure Pipelines

steps:

- task: Docker@2

  displayName: build

  inputs:

    command: build

    Dockerfile: Dockerfile

    buildContext: .

    tags: latest

    arguments: '-t open-semantic-search-poc'



- task: ECRPushImage@1

  displayName: 'Push Image: '

  inputs:

    awsCredentials: 'AWS Connection'

    regionName: 'us-gov-west-1'

    sourceImageName: 'coverme-metabase'

    repositoryName: 'open-semantic-search-poc'

    autoCreateRepository: true





# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

# trigger:
# - master

# pool:
#   vmImage: ubuntu-latest

# steps:
# - task: ECRPushImage@1
#   inputs:
#     awsCredentials: 'AWS Connection'
#     regionName: 'us-gov-west-1'
#     imageSource: 'imagename'
#     sourceImageName: 'open-semantic-search-poc'
#     repositoryName: 'open-semantic-search-poc'
#     autoCreateRepository: true