<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://opensemanticsearch.org/doc/analytics/money/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Automatic extraction of law codes and law clauses - Open Semantic Search</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Automatic extraction of law codes and law clauses";
        var mkdocs_page_input_path = "doc/analytics/money/README.md";
        var mkdocs_page_url = "/doc/analytics/money/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Open Semantic Search
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">About</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Usage</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/">Search</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/operators/">Search operators</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../search/#overview-and-exploration-with-facets">Interactive filters (Faceted search)</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/fuzzy/">Fuzzy search</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../datamanagement/annotation/">Tagging and annotation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Structuring data and documents (Metadata management)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../datamanagement/thesaurus/">Vocabulary and thesaurus (dictionary of names or concepts)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../datamanagement/ontologies/">Lists, Dictionaries, Vocabularies and Thesauri (Ontologies)</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Analyze and explore (Analytics)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../investigative_journalism/howto-analyze-leaks/">Investigate massive leaks for investigative reporting</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../law/">Legal codes and law clauses</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../search/list/">Search by list of names (batch searches)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Administration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tutorial/">Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../admin/install/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../admin/config/">Configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../admin/queue/">Task queue</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../admin/config/log/">Logs</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Additional Applications</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="/solr-search-csv-python-django/README.md">CSV Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/graph-explorer/README.md">Graph Explorer</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/lexememes/README.md">Lexememes</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/solr-ontology-tagger/README.md">Ontology Tagger</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/solr-relevance-ranking-analysis/README.md">Relevance Ranking Analysis</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/rdf2ocr/README.md">RDF or SKOS to OCR</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/rss-feed-manager-python-django/README.md">RSS-Feed Manager</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/search-list/README.md">Search Lists</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/skos2solr/README.md">SKOS to Solr</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/solr/README.md">Solr Server</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/tagger/README.md">Tagger</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="/solr-search-querytagger-python-django/README.md">QueryTagger</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../download/">Download</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="https://github.com/opensemanticsearch/open-semantic-search/">Development</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="" href="../../../donate/README.md">Donate</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Open Semantic Search</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Automatic extraction of law codes and law clauses</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/opensemanticsearch/open-semantic-search/edit/master/docs/doc/analytics/money/README.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="automatic-extraction-of-money-and-currencies">Automatic extraction of money and currencies</h1>
<p>Open Semantic Search extracts amounts of money from text to the facet "Money" and currencies to the facet "Currencies".
For example text parts of your documents like "<em>100 dollars</em>", "<em>1,000$</em>", "<em>$ 100.50</em>" or "<em>100 USD</em>" are extracted to the facet "Money".</p>
<p>So you can overview (facets) and drill down / filter your search results to documents concerning money.</p>
<h2 id="open-source-etl-money-extraction-plugin">Open Source ETL money extraction plugin</h2>
<p>For that purpose the <a href="https://github.com/opensemanticsearch/open-semantic-etl">Open Semantic ETL (extracts documents full text to more structured data and search index)</a> open source <a href="https://github.com/opensemanticsearch/open-semantic-etl/blob/master/src/opensemanticetl/enhance_extract_money.py">plugin "extract money"</a> is based on and combines multiple natural language processing (NLP) and textmining methods like ontology / SKOS thesaurus / dictionary based entity extraction and regular expressions (regex) for extraction of numbers with (fully integrated) open data from the free knowledge graph Wikidata to extract money amounts and currencies in multiple variants from the full texts of your documents.</p>
<p>So by this dictionary- and text-pattern (Regex)-based approach it often extracts additional structured information concerning money where the <a href="../../datamanagement/named_entity_recognition/">machine learning approach by Named Entity Recognition (NER)</a> failed on prediction of the NER class <code>money</code>.</p>
<h2 id="currency-signs">Currency signs</h2>
<p>The plugin is configured with <a href="https://www.wikidata.org/wiki/Q308229">currency signs</a> like for example the <a href="https://www.wikidata.org/wiki/Q11110">Dollar currency sign</a> <code>$</code> or the <a href="https://www.wikidata.org/wiki/Q18100">Euro currency sign</a> <code>€</code>.
<img alt="" src="currency-sign-euro.png" /></p>
<h2 id="currency-labels">Currency labels</h2>
<p>Another main approach is the extraction of currency labels (f.e. "Dollar", "Euro" and their aliases like "US Dollar", "USD" or "EUR") by our integrated currencies thesaurus.</p>
<p>This Simple Knowledge Organization System (SKOS) standard based thesaurus of currencies is an export of results of a <a href="#sparql-query">Wikidata SPARQL query for labels, synonyms and alternate labels of currencies</a> extracted from the Wikidata knowledge graph / ontology.</p>
<p><img alt="" src="currency-euro.png" /></p>
<h2 id="extract-currency-labels-and-aliases-by-thesaurus-dictionary-based-named-entity-extraction">Extract currency labels and aliases by thesaurus (dictionary based named entity extraction)</h2>
<p>Since this SKOS thesaurus of currencies is preconfigured in <a href="../../datamanagement/ontologies">Ontology Manager</a> (Python/Django UI for import data from SPARQL/RDF to Solr Texttagger) of the semantic search engine, this step was yet done by the ETL plugin for dictionary/thesaurus/ontology based extraction of labels of entities from full text by <a href="https://reconciliation-api.github.io/specs/0.1/">OpenRefine Reconciliation API Standard</a> based <a href="https://github.com/opensemanticsearch/open-semantic-entity-search-api">Open Semantic Entity Search API</a>, Solr providing a REST-API for managing these entities with labels and entity IDs/URIs in a Solr index and <a href="https://lucene.apache.org/solr/guide/8_0/the-tagger-handler.html">Solr text tagger</a>, a Finite State Transducer (FST) based dictionary matcher REST-API to extract this indexed labels / substrings from full text.</p>
<h3 id="knowledge-graph-based-on-open-data-from-wikidata">Knowledge Graph based on Open Data from Wikidata</h3>
<p>The used currency ontology includes different currency labels and aliases like "US dollar", "EUR" or "Euros":</p>
<p><img alt="" src="currency-labels.png" /></p>
<p>For getting the <a href="https://github.com/opensemanticsearch/open-semantic-search-apps/blob/master/var/opensemanticsearch/media/ontologies/currencies.rdf">open data list / thesaurus of currency labels and their alternate labels/aliases</a> we <a href="../../datamanagement/opendata/wikidata">query, extract and import Open Data of entities from Wikipedia from the the free universal knowledge graph Wikidata</a> by the following <strong>SPARQL query</strong> returning RDFS labels and SKOS thesaurus alternate labels:</p>
<h4 id="sparql-query">SPARQL query</h4>
<p>Get labels from all instances of type <strong>currency</strong> (Wikidata Entity <a href="https://www.wikidata.org/wiki/Q8142"><code>Q8142</code></a>)</p>
<pre><code>PREFIX skos: &lt;http://www.w3.org/2004/02/skos/core#&gt;
CONSTRUCT {
 ?uri rdfs:label ?label ;
 skos:prefLabel ?prefLabel ;
 skos:altLabel ?altLabel .
}

WHERE {

 ?uri p:P31/ps:P31/wdt:P279* wd:Q8142.

 OPTIONAL {
 ?uri rdfs:label ?label .
 }
 OPTIONAL {
 ?uri skos:prefLabel ?prefLabel .
 }
 OPTIONAL {
 ?uri skos:altLabel ?altLabel .
 }
}
</code></pre>
<h2 id="extraction-combines-numbers-with-currency-signs-or-currency-labels-to-facet-money">Extraction combines numbers with currency signs or currency labels to facet money</h2>
<p>As last step all approaches are combined by a <a href="https://en.wikipedia.org/wiki/Regular_expression">Regular expression</a>
which matches numbers which are combined with extracted currency label before or after a number (text pattern based extraction).</p>
<p>So from this <a href="https://docs.python.org/3/library/re.html">Regex</a> matches we get money like "100 dollars" for the facet "Money".</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/opensemanticsearch/open-semantic-search/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
